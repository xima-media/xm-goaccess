{namespace xm=Xima\XmDkfzNetSite\ViewHelpers}

<f:asset.css type="font/woff2" identifier="font1" as="font" rel="preload" href="EXT:xm_dkfz_net_site/Resources/Public/Fonts/the-sans/the-sans--variable-subset.woff2" />
<f:asset.css type="font/woff2" identifier="font5" as="font" rel="preload" href="EXT:xm_dkfz_net_site/Resources/Public/Fonts/the-serif/the-serif--bold-subset.woff2" />

<f:render partial="Notice" arguments="{_all}" />

<header class="header background--expanded">
	<span class="header__sticky-trigger"></span>
	<div class="header__meta background--expanded">
		<div class="header__center">

			<f:link.page class="logo" pageUid="1" title="DKFZ Intranet homepage">
				<xm:svgInline class="logo__image" src="EXT:xm_dkfz_net_site/Resources/Public/Images/dkfz_logo.svg" />
			</f:link.page>

		</div>
		<div class="header__left">
			<div class="language-switcher">
				<ul class="language-switcher__items">
					<f:for each="{langNav}" as="langItem">
						<li class="language-switcher__item">
							<f:if condition="{langItem.available}">
								<f:then>
									<a
										class="language-switcher__link {f:if(condition: langItem.active, then:'fx--active')}"
										href="{langItem.link}"
										data-tooltip="{langItem.title}"
										aria-expanded="false"
									>{langItem.twoLetterIsoCode}</a>
								</f:then>
								<f:else>
									<span
										class="language-switcher__link fx--blocked"
									>{langItem.twoLetterIsoCode}</span>
								</f:else>
							</f:if>
						</li>
					</f:for>
				</ul>
			</div>

			<f:link.page class="header__link" pageUid="{pidEmergency}" >
				<f:render partial="Icon" arguments="{icon: 'emergency'}"/>
				{f:translate(key: 'page.emergency', extensionName: 'XmDkfzNetSite')}
			</f:link.page>
		</div>
		<div class="header__right">

			<div class="navigation navigation--sub">
				<ul class="navigation__items">



						<li class="navigation__item navigation__item--open-chat">
							<a class="navigation__link button button--icon-only"
							   href="#message"
							   aria-label="{f:translate(key: 'page.feedbackMenu', extensionName: 'XmDkfzNetSite')}"
							   data-tooltip="{f:translate(key: 'page.feedbackMenu', extensionName: 'XmDkfzNetSite')}"
							   aria-expanded="false">
								<f:render partial="Icon" arguments="{icon: 'message'}"/>
							</a>
						</li>
						<li class="navigation__item navigation__item--bookmark">
							<a class="navigation__link button button--icon-only"
							   href="#bookmark"
							   aria-label="{f:translate(key: 'page.bookmarkMenu', extensionName: 'XmDkfzNetSite')}"
							   data-tooltip="{f:translate(key: 'page.bookmarkMenu', extensionName: 'XmDkfzNetSite')}"
							   aria-expanded="false">
								<f:render partial="Icon" arguments="{icon: 'bookmark'}"/>
							</a>
						</li>
						<li class="navigation__item navigation__item--user"
							data-user-info="{f:uri.action(action: 'userinfo', controller: 'Api', extensionName: 'BwGuild', pluginName: 'Api', pageType: 1657523819, pageUid: 2)}"
							id="userinfoUri">

							<div class="dropdown">
								<button class=" button button--icon-only button--white"
										id="dropdown-menu-link"
										data-bs-toggle="dropdown"
										aria-label="{f:translate(key: 'page.profileMy', extensionName: 'XmDkfzNetSite')}"
										data-tooltip="{f:translate(key: 'page.profileMy', extensionName: 'XmDkfzNetSite')}"
										aria-expanded="false">
									<figure>
										<xm:svgInline width="30" height="30" src="EXT:xm_dkfz_net_site/Resources/Public/Images/frontend_user_default_alt-profile.svg" />
									</figure>
								</button>
								<ul class="dropdown-menu" aria-labelledby="dropdown-menu-link">
									<li class="show-for-loggedIn">
										<a class="dropdown-item" href="#" data-user-profile-link>{f:translate(key: 'page.profileMy', extensionName: 'XmDkfzNetSite')}</a>
									</li>
									<li class="show-for-loggedIn">
										<a class="dropdown-item"
										   href="#"
										   data-user-edit-link="{f:uri.action(action: 'userEditForm', controller: 'Api', extensionName: 'BwGuild', pluginName: 'Api', pageType: 1657523819, pageUid: 2)}">
											{f:translate(key: 'page.profileEdit', extensionName: 'XmDkfzNetSite')}
										</a>
									</li>
									<li class=" show-for-loggedIn">
										<hr class="dropdown-divider">
									</li>
									<li class="show-for-loggedIn">
										<f:link.page  pageUid="{pidLogin}"
													  section="#action-logged-out"
													 class="dropdown-item"
													  id="logout-link"
													 additionalParams="{logintype:'logout'}">
											{f:translate(key: 'page.logout', extensionName: 'XmDkfzNetSite')}
										</f:link.page>
									</li>
									<li class="hide-for-loggedIn">
										<f:variable name="loginProvider" value="xima"/>
										<f:if condition="{baseUrl} == 'https://intranetstage.dkfz.de' || {baseUrl} == 'https://intranet2.dkfz.de'">
											<f:variable name="loginProvider" value="dkfz"/>
										</f:if>
										<f:link.page id="login-link"
													 pageUid="1"
													 additionalParams="{oauth2-provider: loginProvider, logintype: 'login', after-oauth2-redirect-uri: '{currentUrl}#action-logged-in'}"
													 title="Login"
													 class="dropdown-item"
													 additionalAttributes="{role: 'button'}"
													 aria="{pressed: ariaPressed}">
											{f:translate(key: 'page.login', extensionName: 'XmDkfzNetSite')}
										</f:link.page>
									</li>
								</ul>
							</div>

						</li>


					<f:if condition="{currentPid} != {pidSearch}">
						<li class="navigation__item navigation__item--quick-search">
							<f:cObject typoscriptObjectPath="lib.quickSearch"/>
						</li>
					</f:if>
					<li class="navigation__item navigation__item--menu-toggle">
						<button class="navigation__link button button--icon-only button--white fx--toggle-main-menu"
								type="button"
								aria-expanded="false"
								aria-label="Menu button"
								aria-controls="navigation__items--main">
							<f:render partial="Icon" arguments="{icon: 'menu'}"/>
							<f:render partial="Icon" arguments="{icon: 'close'}"/>
						</button>
					</li>
				</ul>
			</div>

		</div>
	</div>
	<div class="header__navigation">
		<f:render partial="MainNavigation" arguments="{_all}"/>
	</div>
</header>

<main class="main {mainClass} color-accent--{f:if(condition: data.tx_xmdkfznetsite_color, then: data.tx_xmdkfznetsite_color, else: 'primary')}" style="{f:render(partial: 'BackgroundImages', arguments: '{_all}')}">
	<f:render section="Main"/>
</main>

<f:render partial="Footer" arguments="{_all}" />

<div id="hiddenLogin">
	<f:render partial="LoginForm" arguments="{_all}" />
</div>

<div class="lightbox lightbox--loading">
	<div class="lightbox__content">
		<button class="lightbox__close" aria-hidden="true" title="{f:translate(key: 'lightbox.close.title', extensionName: 'XmDkfzNetSite')}">
			<f:render partial="Icon" arguments="{icon: 'close'}" />
		</button>
		<div class="lightbox__wrap"></div>
		<div class="lightbox__loader">
			<div class="sk-fading-circle">
				<div class="sk-circle1 sk-circle"></div>
				<div class="sk-circle2 sk-circle"></div>
				<div class="sk-circle3 sk-circle"></div>
				<div class="sk-circle4 sk-circle"></div>
				<div class="sk-circle5 sk-circle"></div>
				<div class="sk-circle6 sk-circle"></div>
				<div class="sk-circle7 sk-circle"></div>
				<div class="sk-circle8 sk-circle"></div>
				<div class="sk-circle9 sk-circle"></div>
				<div class="sk-circle10 sk-circle"></div>
				<div class="sk-circle11 sk-circle"></div>
				<div class="sk-circle12 sk-circle"></div>
			</div>
		</div>
	</div>
</div>

<f:render partial="Disruptor" arguments="{_all}" />

<f:cObject typoscriptObjectPath="lib.generalFeedbackForm" />
