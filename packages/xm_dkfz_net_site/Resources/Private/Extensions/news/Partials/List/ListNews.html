<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	  xmlns:n="http://typo3.org/ns/GeorgRinger/News/ViewHelpers"
	  data-namespace-typo3-fluid="true">

<nav class="news-list">
	<f:for each="{news}" as="newsItem" iteration="i">
		<n:link newsItem="{newsItem}"
				settings="{settings}"
				title="{newsItem.title}"
				class="news-list__item color-accent--{newsItem.txXmdkfznetsiteColor}">
			<n:excludeDisplayedNews newsItem="{newsItem}"/>

			<div>
				<f:for each="{newsItem.falMedia}" as="file" iteration="i">
					<f:if condition="{i.isFirst}">
						<f:render partial="Image" arguments="{image: file, patternSize: 'sm', patternStyle: 'color', noCaption: 1, size: 'sm', cropVariant: 'preview'}"/>
					</f:if>
				</f:for>

				<f:if condition="!{newsItem.falMedia}">
					<f:render partial="Image" arguments="{patternSize: 'sm'}"/>
				</f:if>
			</div>

			<div>
				<p class="text-small m-b-1">
					<f:format.date format="%d. %B %Y">{newsItem.datetime}</f:format.date>
					<f:if condition="{newsItem.firstCategory}">
						<span class="vertical-spacer">|</span>
						{newsItem.firstCategory.title}
					</f:if>
				</p>
				<h3 class="h4 m-b-05">{newsItem.title}</h3>
				<p>
					<f:if condition="{newsItem.teaser}">
						<f:then>
							{newsItem.teaser -> f:format.crop(maxCharacters: 250, respectWordBoundaries:'1') ->
							f:format.stripTags()}
						</f:then>
						<f:else>
							{newsItem.bodytext -> f:format.crop(maxCharacters: 250, respectWordBoundaries:'1') ->
							f:format.stripTags()}
						</f:else>
					</f:if>
				</p>
			</div>

		</n:link>
	</f:for>
</nav>


</html>
