<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	  xmlns:n="http://typo3.org/ns/GeorgRinger/News/ViewHelpers"
	  data-namespace-typo3-fluid="true">

<div class="topnews" style="--count:{news->f:count()}; --current:0">

	<button class="" aria-label="ZurÃ¼ck">
		<f:render partial="Icon" arguments="{icon: 'chevron-left'}"/>
	</button>

	<div class="topnews__container">
		<div class="topnews__wrapper">
			<f:for each="{news}" as="newsItem" iteration="i">
				<n:excludeDisplayedNews newsItem="{newsItem}"/>
				<f:render section="NewsItem" arguments="{newsItem: newsItem, k:i}"/>
			</f:for>
		</div>
	</div>


	<button class="next" aria-label="Vor">
		<f:render partial="Icon" arguments="{icon: 'chevron-right'}"/>
	</button>

</div>


<f:section name="NewsItem">
	<div class="topnews__item color-accent--{newsItem.txXmdkfznetsiteColor}">

		<f:for each="{newsItem.falMedia}" as="file" iteration="i">
			<f:if condition="{i.isFirst}">
				<n:link newsItem="{newsItem}" settings="{settings}" title="{newsItem.title}">
					<f:render partial="Image" arguments="{image: file}"/>
				</n:link>
			</f:if>
		</f:for>

		<f:if condition="!{newsItem.falMedia}">
			<f:render partial="Image" arguments=""/>
		</f:if>

		<div class="topnews__bullets">
			<f:variable name="numbers" value="{0:0, 1:1, 2:2, 3:3, 4:4, 5:5, 6:6, 7:7}"/>
			<f:for each="{numbers}" as="nr" iteration="j">
				<f:if condition="{j.index} < {k.total}">
					<a href="#" class="{f:if(condition: '{j.index} == {k.index}', then: 'active')}"></a>
				</f:if>
			</f:for>
		</div>

		<div class="topnews__text">
			<n:link newsItem="{newsItem}" settings="{settings}" title="{newsItem.title}">
				<h3>{newsItem.title}</h3>
			</n:link>

			<div class="topnews__text-main">
				<p>
					<f:format.date format="{f:translate(key:'dateFormat')}">{newsItem.datetime}</f:format.date>
					<f:if condition="{newsItem.firstCategory}">
						| {newsItem.firstCategory.title}
					</f:if>
				</p>
				<f:if condition="{newsItem.teaser}">
					<f:then>
						{newsItem.teaser -> f:format.crop(maxCharacters: '{settings.cropMaxCharacters}',
						respectWordBoundaries:'1') -> f:format.html()}
					</f:then>
					<f:else>
						{newsItem.bodytext -> f:format.crop(maxCharacters: '{settings.cropMaxCharacters}',
						respectWordBoundaries:'1') -> f:format.html()}
					</f:else>
				</f:if>
			</div>

			<n:link newsItem="{newsItem}" settings="{settings}" class="card__link--more" title="{newsItem.title}">
				<f:translate key="more-link"/>
				<f:render partial="Icon" arguments="{icon: 'arrow-right'}"/>
			</n:link>
		</div>
	</div>
</f:section>
</html>
