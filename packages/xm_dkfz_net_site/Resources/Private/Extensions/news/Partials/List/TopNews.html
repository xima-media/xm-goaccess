<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	  xmlns:n="http://typo3.org/ns/GeorgRinger/News/ViewHelpers"
	  data-namespace-typo3-fluid="true">

<div class="topnews" style="--count:{news->f:count()}; --current:0">

	<button class="" aria-label="ZurÃ¼ck">
		<f:render partial="Icon" arguments="{icon: 'chevron-left'}"/>
	</button>

	<div class="topnews__container">
		<div class="topnews__wrapper">
			<f:for each="{news}" as="newsItem" iteration="i">
				<n:excludeDisplayedNews newsItem="{newsItem}"/>
				<f:render section="NewsItem" arguments="{newsItem: newsItem, i: i}"/>
			</f:for>
		</div>
	</div>


	<button class="next" aria-label="Vor">
		<f:render partial="Icon" arguments="{icon: 'chevron-right'}"/>
	</button>

	<div class="topnews__bullets">
		<f:for each="{news}" as="newsItem" iteration="i">
			<a href="#" class=""></a>
		</f:for>
	</div>

</div>


<f:section name="NewsItem">
	<div class="topnews__item color-accent--{newsItem.txXmdkfznetsiteColor}">

		<f:for each="{newsItem.falMedia}" as="file" iteration="i">
			<f:if condition="{i.isFirst}">
				<f:render partial="Image" arguments="{image: file}"/>
			</f:if>
		</f:for>

		<f:if condition="!{newsItem.falMedia}">
			<f:render partial="Image" arguments=""/>
		</f:if>

		<div class="topnews__text">
			<h3>{newsItem.title}</h3>

			<div class="topnews__text-main">
				<p>
					<f:format.date format="{f:translate(key:'dateFormat')}">{newsItem.datetime}</f:format.date>
					<f:if condition="{newsItem.firstCategory}">
						| {newsItem.firstCategory.title}
					</f:if>
				</p>
				<f:if condition="{newsItem.teaser}">
					<f:then>
						{newsItem.teaser -> f:format.crop(maxCharacters: '{settings.cropMaxCharacters}',
						respectWordBoundaries:'1') -> f:format.html()}
					</f:then>
					<f:else>
						{newsItem.bodytext -> f:format.crop(maxCharacters: '{settings.cropMaxCharacters}',
						respectWordBoundaries:'1') -> f:format.html()}
					</f:else>
				</f:if>
			</div>

			<n:link newsItem="{newsItem}"
					settings="{settings}"
					class="card__link--more"
					title="{newsItem.title}">
				<f:translate key="more-link"/> <f:render partial="Icon" arguments="{icon: 'arrow-right'}" />
			</n:link>
		</div>
	</div>
</f:section>
</html>
