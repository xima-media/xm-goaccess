{namespace xm=Xima\XmDkfzNetSite\ViewHelpers}

<f:if condition="!{width}">
	<f:variable name="width">150</f:variable>
</f:if>

<f:if condition="{invert}">
	<f:variable name="invert">_invert</f:variable>
</f:if>

<f:if condition="{user.logo}">
	<f:if condition="{user.logo.0}">
		<f:then>
			<f:render section="Image" arguments="{logo: user.logo.0, width: width, editable: editable}"/>
		</f:then>
		<f:else>
			<f:render section="Image" arguments="{logo: user.logo, width: width, editable: editable}"/>
		</f:else>

	</f:if>
</f:if>

<f:if condition="!{user.logo.0} && !{user.logo}">
	<figure class="userimage {widthClass}">
		<picture>
			<xm:svgInline width="{width}"
						  height="{width}"
						  src="EXT:xm_dkfz_net_site/Resources/Public/Images/frontend_user_default_alt{invert}.svg"/>
		</picture>
		<f:if condition="{editable}">
			<button type="button" class="userimage__edit-button userimage__edit-button--hidden">
				<f:render partial="Icon" arguments="{icon: 'pencil'}"/>
			</button>
		</f:if>
	</figure>
</f:if>

<f:section name="Image">
	<f:if condition="{width + 1} > 100">
		<f:variable name="widthClass">userimage--large</f:variable>
	</f:if>

	<figure class="userimage {widthClass}">
		<f:if condition="{editable}">
			<button type="button" class="userimage__edit-button">
				<f:render partial="Icon" arguments="{icon: 'pencil'}"/>
			</button>
		</f:if>
		<picture>
			<source srcset="{f:uri.image(image:logo, width:'{width}c', height:'{width}c', cropVariant:'square', fileExtension: 'webp')}"
					type="image/webp">
			<source srcset="{f:uri.image(image:logo, width:'{width}c', height:'{width}c', cropVariant:'square', fileExtension: 'jpg')}"
					type="image/jpeg">
			<img src="{f:uri.image(image:logo, cropVariant:'square', fileExtension: 'jpg', width: '{width}c', height: '{width}c')}"
				 alt="{user.logo.0.alternative}"
				 width="{width}"
				 height="{width}"
				 loading="lazy"/>
		</picture>
		<span></span>
	</figure>
</f:section>
