<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
	  xmlns:dkfz="http://typo3.org/ns/Xima/XmDkfzNetSite/ViewHelpers"
	  data-namespace-typo3-fluid="true">

<f:comment><!--
	Arguments:
	- image (FileInterface)
	- size: sm (default: 970)
	- cropVariant
--></f:comment>


<f:switch expression="{size}">
	<f:case value="sm">
		<f:variable name="imageSize" value="440"></f:variable>
	</f:case>
	<f:case value="xl">
		<f:variable name="imageSize" value="1146"></f:variable>
	</f:case>
	<f:defaultCase>
		<f:variable name="imageSize" value="970"></f:variable>
	</f:defaultCase>
</f:switch>

<figure>
	<div class="picture__item {f:if(condition: image, else: 'picture__item--no-image')}">
		<span aria-hidden="true"
			  class="picture__pattern {f:if(condition: patternStyle, then: patternStyle, else: 'pattern')}  {f:if(condition: image, else:'no-image color-accent--gray-900')}"></span>
		<f:if condition="{image}">
			<picture>
				<source srcset="{f:uri.image(image:image, width:970, cropVariant: cropVariant, fileExtension: 'webp')}"
						type="image/webp">
				<source srcset="{f:uri.image(image:image, width:970, cropVariant: cropVariant, fileExtension: 'jpg')}"
						type="image/jpeg">
				<f:image image="{image}" width="{imageSize}" cropVariant="{cropVariant}" fileExtension="jpg" class="picture__image image--responsive" loading="{f:if(condition: noLazy, else: 'lazy')}" />
			</picture>
		</f:if>
		<f:if condition="{image.properties.copyright}">
			<f:render partial="Copyright" arguments="{text: image.properties.copyright}"/>
		</f:if>
	</div>
	<f:if condition="{image.properties.description} && !{noCaption}">
		<figcaption class="picture__caption">
			{image.properties.description}
		</figcaption>
	</f:if>
</figure>

</html>
