<h3>
	<f:translate extensionName="XmDkfzNetSite"
				 key="{f:if(condition:offer.uid, then: 'marketplace.headline.edit', else: 'marketplace.headline.new')}"/>
</h3>

<f:flashMessages/>

<f:spaceless>

	<f:form class="userprofile"
			controller="Api"
			action="offerEditUpdate"
			object="{offer}"
			name="offer"
			method="POST"
			enctype="multipart/form-data"
			pageType="1657523819">

		<f:form.hidden property="feUser"/>

		<fieldset>
			<label for="recordType">
				<f:translate extensionName="XmDkfzNetSite" key="marketplace.type"/>
			</label>
			<div class="form-element">
				<f:form.select id="recordType" property="recordType">
					<f:form.select.option value="4">
						<f:translate extensionName="XmDkfzNetSite" key="marketplace.type.4"/>
					</f:form.select.option>
					<f:form.select.option value="5">
						<f:translate extensionName="XmDkfzNetSite" key="marketplace.type.5"/>
					</f:form.select.option>
					<f:form.select.option value="6">
						<f:translate extensionName="XmDkfzNetSite" key="marketplace.type.6"/>
					</f:form.select.option>
				</f:form.select>
			</div>
		</fieldset>

		<fieldset>
			<label for="title">
				<f:translate extensionName="XmDkfzNetSite" key="marketplace.title"/>
			</label>
			<div class="form-element">
				<f:form.textfield id="title"
								  property="title"
								  additionalAttributes="{required:''}"
								  placeholder="{f:translate(extensionName:'XmDkfzNetSite', key:'marketplace.title.placeholder')}"/>
			</div>
		</fieldset>

		<fieldset>
			<label for="category">
				<f:translate extensionName="XmDkfzNetSite" key="marketplace.category"/>
			</label>
			<div class="form-element">
				<f:form.select id="category"
							   property="categories.0"
							   options="{categories}"
							   optionValueField="uid"
							   optionLabelField="title"
							   prependOptionValue=""
							   prependOptionLabel="{f:translate(extensionName:'XmDkfzNetSite', key:'marketplace.category.placeholder')}"
							   additionalAttributes="{required:''}"/>
			</div>
		</fieldset>

		<fieldset>
			<label for="description">
				<f:translate extensionName="XmDkfzNetSite" key="marketplace.description"/>
			</label>
			<div class="form-element">
				<f:form.textarea id="description" property="description"/>
			</div>
		</fieldset>

		<fieldset>
			<label for="price">
				<f:translate extensionName="XmDkfzNetSite" key="marketplace.price"/>
			</label>
			<div class="form-element form-element--price">
				<f:form.textfield id="price"
								  property="price"
								  value="{offer.price->f:format.number(decimals:2, decimalSeparator:',')}"
								  placeholder="{f:translate(extensionName:'XmDkfzNetSite', key:'marketplace.price.placeholder')}"/>
				<p><strong>&#8364;</strong></p>
			</div>
		</fieldset>

		<fieldset>
			<label>
				<f:translate extensionName="XmDkfzNetSite" key="marketplace.images"/>
			</label>
			<div class="form-element form-element--images">

				<f:for each="{0:0,1:1,2:2,3:3,4:4,5:5}" as="index">
					<a href="#"
					   class="image-uploader {f:if(condition: '{offer.images.{index}}', then: 'image-uploader--filled', else: 'image-uploader--empty')}">
						<f:form.upload multiple="true"
									   additionalAttributes="{accept: 'image/*'}"
									   property="images"
									   id="images.{index}}"/>
						<f:form.checkbox value="0" name="deleteImage{index}" id="deleteLogo"/>

						<div class="image-uploader__drop">
							<f:if condition="{offer.images.{index}}">
								<f:image width="100c" height="100c" image="{offer.images.{index}}"/>
							</f:if>
							<span class="image-uploader__placeholder"></span>
							<f:render partial="Icon" arguments="{icon:'plus'}"/>
							<f:render partial="Icon" arguments="{icon:'pencil'}"/>
						</div>
					</a>
				</f:for>
			</div>
		</fieldset>

		<fieldset>
			<div class="button-group">
				<button data-abort href="#" class="button button--primary fx--hover">
					{f:translate(key: 'abort', extensionName: 'XmDkfzNetSite')}
				</button>
				<button type="submit" class="button button--primary">
					{f:translate(key: 'save', extensionName: 'XmDkfzNetSite')}
				</button>
			</div>
		</fieldset>
	</f:form>

</f:spaceless>
