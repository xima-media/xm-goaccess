{namespace xm=Xima\XmDkfzNetSite\ViewHelpers}

<h3 class="bookmarks-sidebar__headline">{f:translate(key: 'bookmarks.headline', extensionName: 'XmDkfzNetSite')}</h3>


<f:if condition="{userinfo.bookmarks.users}">
	<h5 class="m-b-0">{f:translate(key: 'bookmarks.users', extensionName: 'XmDkfzNetSite')}</h5>
	<ul class="list bookmarks-sidebar bookmarks-sidebar--fe_users">
		<f:for each="{userinfo.bookmarks.users}" as="user">
			<li>
				<f:link.action action="show"
							   pluginName="Usershow"
							   extensionName="BwGuild"
							   controller="User"
							   pageUid="159"
							   class="content"
							   arguments="{user: user.uid}">

					<f:render partial="UserImage" arguments="{user: user, width: 70, invert: 1}"/>

					<div>
						<h6>{user.displayName}</h6>

						<f:if condition="{user.contactFunction}">
							<p class="m-b-0 text-tiny">{user.contactFunction}</p>
						</f:if>

						<f:if condition="{user.groups}">
							<p class="m-b-0  text-tiny"><strong>
								<f:for each="{user.groups}" as="group" iteration="i">
									{group.dkfzNumber} - {group.title}{f:if(condition: i.isLast, else: ', ')}
								</f:for>
							</strong></p>
						</f:if>

					</div>

				</f:link.action>

				<a href="#"
				   class="tab-item__link"
				   data-bookmark-url="{f:uri.action(action: 'bookmark', controller: 'Api', extensionName: 'BwGuild', pluginName: 'Api', pageType: 1657523819, pageUid: 2, arguments: {tableName: 'fe_users', recordUid: user.uid})}">
					<f:render partial="Icon" arguments="{icon: 'delete-bin'}"/>
				</a>

			</li>
		</f:for>
	</ul>
</f:if>

<f:if condition="{userinfo.bookmarks.pages}">
	<h5 class="m-b-0">{f:translate(key: 'bookmarks.pages', extensionName: 'XmDkfzNetSite')}</h5>
	<ul class="list bookmarks-sidebar bookmarks-sidebar--pages">
		<f:for each="{userinfo.bookmarks.pages}" as="page">
			<li>
				<div class="content">
					<f:link.typolink class="h6" parameter="{page.uid}">
						<f:render partial="Icon" arguments="{icon: 'arrow-right', size: 'sm'}"/>
						{page.title}
					</f:link.typolink>
					<nav class="text-tiny">
						<f:for each="{page.rootline}" as="item">
							<f:link.typolink parameter="{item.uid}"/>
						</f:for>
					</nav>
				</div>
				<a href="#"
				   class="tab-item__link"
				   data-bookmark-url="{f:uri.action(action: 'bookmark', controller: 'Api', extensionName: 'BwGuild', pluginName: 'Api', pageType: 1657523819, pageUid: 2, arguments: {tableName: 'pages', recordUid: page.uid})}">
					<f:render partial="Icon" arguments="{icon: 'delete-bin'}"/>
				</a>
			</li>
		</f:for>
	</ul>
</f:if>

<f:if condition="{userinfo.bookmarks.tx_xmdkfznetsite_domain_model_external_link}">
	<h5 class="m-b-0">Links</h5>
	<ul class="list bookmarks-sidebar bookmarks-sidebar--links">
		<f:for each="{userinfo.bookmarks.tx_xmdkfznetsite_domain_model_external_link}" as="link">
			<li>
				<div class="content">
					<f:link.typolink class="h6" parameter="{link.url}">
						<f:render partial="Icon" arguments="{icon: 'arrow-right', size: 'sm'}"/>
						{link.title}
					</f:link.typolink>
				</div>
				<a href="#"
				   class="tab-item__link"
				   data-bookmark-url="{f:uri.action(action: 'bookmark', controller: 'Api', extensionName: 'BwGuild', pluginName: 'Api', pageType: 1657523819, pageUid: 2, arguments: {tableName: 'tx_xmdkfznetsite_domain_model_external_link', recordUid: link.uid})}">
					<f:render partial="Icon" arguments="{icon: 'delete-bin'}"/>
				</a>
			</li>
		</f:for>
	</ul>
</f:if>

<f:if condition="{userinfo.bookmarks.sys_file}">
	<h5>{f:translate(key: 'bookmarks.sys_file', extensionName: 'XmDkfzNetSite')}</h5>
	<ul class="list bookmarks-sidebar bookmarks-sidebar--sys_file">
		<f:for each="{userinfo.bookmarks.sys_file}" as="file" iteration="fileIterator">
			<li>
				<div class="content text-tiny">
					<span class="title">{f:if(condition:file.title, then: file.title, else:'{file.name->f:format.htmlspecialchars()}')}</span>
					<span class="tab-item__type">{file.extension}</span>
					<a href="{f:uri.typolink(parameter:'t3://file?uid={file.uid}')}"
					   class="tab-item__link"
					   type="button"
					   aria-label="{f:translate(key: 'label.download', extensionName: 'XmDkfzNetSite')}"
					   download>
						<f:render partial="Icon" arguments="{icon: 'download'}"/>
					</a>
				</div>
				<a href="#"
				   class="tab-item__link"
				   data-bookmark-url="{f:uri.action(action: 'bookmark', controller: 'Api', extensionName: 'BwGuild', pluginName: 'Api', pageType: 1657523819, pageUid: 2, arguments: {tableName: 'sys_file', recordUid: file.uid})}">
					<f:render partial="Icon" arguments="{icon: 'delete-bin'}"/>
				</a>
			</li>
		</f:for>
	</ul>
</f:if>

<f:if condition="{userinfo.bookmarks.tx_news_domain_model_news}">
	<h5 class="m-b-0">{f:translate(key: 'bookmarks.news', extensionName: 'XmDkfzNetSite')}</h5>
	<ul class="list bookmarks-sidebar bookmarks-sidebar--news">
		<f:for each="{userinfo.bookmarks.tx_news_domain_model_news}" as="news">
			<li>
				<f:link.action extensionName="News"
							   pluginName="Pi1"
							   controller="News"
							   action="detail"
							   pageUid="142"
							   class="content"
							   arguments="{news: news.uid}">
					<f:if condition="{news.image}">
						<figure class="picture__item">
							<span aria-hidden="true" class="picture__pattern color sm"></span>
							<picture>
								<f:image class="picture__image" src="{news.image}" cropVariant="preview" treatIdAsReference="1" width="120"/>
							</picture>
						</figure>
					</f:if>
					<f:if condition="!{news.image}">
						<figure class="picture__item picture__item--no-image color-accent--primary">
							<span aria-hidden="true"
								  class="picture__pattern pattern no-image color-accent--gray-900"></span>
						</figure>
					</f:if>
					<div>
						<p class="m-b-0 text-tiny">
							<f:format.date format="d.m.Y">{news.datetime}</f:format.date>
						</p>
						<h6>{news.title}</h6>
						<p class="m-b-0 text-tiny">{news.bodytext->f:format.stripTags()->f:format.crop(maxCharacters: 50)}</p>
					</div>
				</f:link.action>

				<a href="#"
				   class="tab-item__link"
				   data-bookmark-url="{f:uri.action(action: 'bookmark', controller: 'Api', extensionName: 'BwGuild', pluginName: 'Api', pageType: 1657523819, pageUid: 2, arguments: {tableName: 'tx_news_domain_model_news', recordUid: news.uid})}">
					<f:render partial="Icon" arguments="{icon: 'delete-bin'}"/>
				</a>
			</li>
		</f:for>
	</ul>
</f:if>

<f:if condition="{userinfo.bookmarks.tx_bwguild_domain_model_offer}">
	<h5 class="m-b-0">{f:translate(key: 'bookmarks.tx_bwguild_domain_model_offer', extensionName: 'XmDkfzNetSite')}</h5>
	<ul class="list bookmarks-sidebar bookmarks-sidebar--tx_bwguild_domain_model_offer">
		<f:for each="{userinfo.bookmarks.tx_bwguild_domain_model_offer}" as="offer">
			<li>
				<div class="content">
					<f:link.action extensionName="BwGuild"
								   pluginName="Offershow"
								   controller="Offer"
								   action="show"
								   pageUid="1057"
								   class="h6"
								   arguments="{offer: offer.uid}">
						<f:render partial="Icon" arguments="{icon: 'arrow-right', size: 'sm'}"/>
						{offer.title}
					</f:link.action>
				</div>
				<a href="#"
				   class="tab-item__link"
				   data-bookmark-url="{f:uri.action(action: 'bookmark', controller: 'Api', extensionName: 'BwGuild', pluginName: 'Api', pageType: 1657523819, pageUid: 2, arguments: {tableName: 'tx_bwguild_domain_model_offer', recordUid: offer.uid})}">
					<f:render partial="Icon" arguments="{icon: 'delete-bin'}"/>
				</a>
			</li>
		</f:for>
	</ul>
</f:if>

<div class="bookmarks-sidebar__infobox infobox infobox--pattern color-accent--cyan">
	<div class="infobox--wrapper">
		<p class="infobox__text">{f:translate(key: 'bookmarks.empty', extensionName: 'XmDkfzNetSite')}</p>
	</div>
</div>
