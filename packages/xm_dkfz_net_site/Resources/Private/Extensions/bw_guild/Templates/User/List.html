<f:spaceless>
	<div class="results">

		<f:if condition="{pagination.numberOfResults}">
			<f:then>
				<div class="results__topbar">
					<h2 class="results__title h6">
						<f:translate extensionName="XmDkfzNetSite"
									 key="usersearch.found"
									 arguments="{0: pagination.numberOfResults}"/>
					</h2>
					<span class="results__switcher">
						<a href="#"
						   class="results__switcher__item results__switcher__item--cards active"
						   data-state="grid"
						   aria-label="{f:translate(key: 'usersearch.gridView', extensionName: 'XmDkfzNetSite')}"
						   data-tooltip="{f:translate(key: 'usersearch.gridView', extensionName: 'XmDkfzNetSite')}">
							<f:render partial="Icon" arguments="{icon: 'grid', width: 24, height: 24}"/>
						</a>
						<a href="#"
						   class="results__switcher__item results__switcher__item--cards"
						   data-state="list"
						   aria-label="{f:translate(key: 'usersearch.listView', extensionName: 'XmDkfzNetSite')}"
						   data-tooltip="{f:translate(key: 'usersearch.listView', extensionName: 'XmDkfzNetSite')}">
							<f:render partial="Icon" arguments="{icon: 'list', width: 24, height: 24}"/>
						</a>
					</span>
				</div>
			</f:then>
			<f:else>
				<div class="callout">
					<div class="infobox infobox--pattern color-accent--cyan">
						<div class="infobox--wrapper">
							<h4 class="infobox__title">
								<f:translate extensionName="XmDkfzNetSite" key="usersearch.notfound"/>
							</h4>
							<p>
								<f:translate extensionName="XmDkfzNetSite" key="usersearch.notfound.description"/>
							</p>
						</div>
					</div>
				</div>
			</f:else>
		</f:if>
		<ul class="list users">
			<f:for each="{users}" as="user">
				<li>
					<div class="users__item">


						<f:link.action action="show"
									   class=""
									   pageUid="{settings.showPid}"
									   pluginName="Usershow"
									   title="{user.displayName}"
									   controller="User"
									   arguments="{user: user.uid}">
							<f:render partial="UserImage" arguments="{user: user, width: 80, invert: 1}"/>

							<h3 class="h6">{user.displayName}</h3>
						</f:link.action>

						<div>
							<f:if condition="{user.contactFunction}">
								<p class="text-small m-b-0">{user.contactFunction}</p>
							</f:if>

							<f:if condition="{user.groups}">
								<p class="text-small"><strong>
									<f:for each="{user.groups}" as="group" iteration="i">
										<f:link.action action="list"
													   class=""
													   pluginName="Userlist"
													   section="c381"
													   title="{group.title}"
													   controller="User"
													   arguments="{demand: {feGroup: group.fakeSlug}}">
											{group.dkfzNumber} - {group.title}{f:if(condition: i.isLast, else: ', ')}
										</f:link.action>
									</f:for>
								</strong></p>
							</f:if>
						</div>

						<ul class="list contacts text-small m-b-0">

							<f:if condition="{user.contactRoom}">
								<li class="contact__item">
									<f:render partial="Icon" arguments="{icon: 'location', width: 14, height: 14}"/>
									<f:link.action action="list"
												   class=""
												   pluginName="Userlist"
												   section="c381"
												   controller="User"
												   arguments="{demand: {room: user.contactRoomFakeSlug}}">
										{user.contactRoom}
									</f:link.action>
								</li>
							</f:if>

							<f:for each="{user.phoneContacts}" as="contact" iteration="i">
								<li class="contact__item">
									<f:render partial="Icon" arguments="{icon: 'phone', width: 14, height: 14}"/>
									{contact.number}
								</li>
							</f:for>

							<f:for each="{user.faxContacts}" as="contact" iteration="i">
								<li class="contact__item">
									<f:render partial="Icon" arguments="{icon: 'printer', width: 14, height: 14}"/>
									{contact.number}
								</li>
							</f:for>

							<f:if condition="{user.email}">
								<li class="contact__item">
									<f:render partial="Icon" arguments="{icon: 'mail', width: 14, height: 14}"/>
									<f:link.email email="{user.email}">{user.email}</f:link.email>
								</li>
							</f:if>
						</ul>

					</div>
				</li>
			</f:for>
		</ul>

	</div>

	<f:if condition="{pagination.pagination.nextPageNumber}">
		<div class="text-center">
			<a href="#" class="button button--primary" id="userResultList-more">
				<f:render partial="Icon" arguments="{icon: 'arrow-down', size: 'sm'}"/>
				<div class="sk-fading-circle">
					<div class="sk-circle1 sk-circle"></div>
					<div class="sk-circle2 sk-circle"></div>
					<div class="sk-circle3 sk-circle"></div>
					<div class="sk-circle4 sk-circle"></div>
					<div class="sk-circle5 sk-circle"></div>
					<div class="sk-circle6 sk-circle"></div>
					<div class="sk-circle7 sk-circle"></div>
					<div class="sk-circle8 sk-circle"></div>
					<div class="sk-circle9 sk-circle"></div>
					<div class="sk-circle10 sk-circle"></div>
					<div class="sk-circle11 sk-circle"></div>
					<div class="sk-circle12 sk-circle"></div>
				</div>
				Weitere laden
			</a>
		</div>
	</f:if>

	<f:render partial="Pagination"
			  arguments="{pagination: pagination.pagination, paginator: pagination.paginator, actionName: 'list', demand: demand}"/>
</f:spaceless>
