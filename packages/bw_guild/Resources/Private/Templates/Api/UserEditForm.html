<f:flashMessages/>

<f:spaceless>

	<f:form class="userprofile"
			controller="Api"
			action="userEditUpdate"
			object="{user}"
			name="user"
			method="POST"
			enctype="multipart/form-data"
			pageType="1657523819">

		<f:form.select class="d-none"
					   property="features"
					   multiple="1"
					   options="{features}"
					   optionLabelField="name"/>

		<a href="#" class="d-none button button--secondary" data-feature="###JS_TEMPLATE###">
			<span></span>
			<f:render partial="Icon" arguments="{icon: 'close', size: 'xs'}"/>
		</a>

		<h3>{f:translate(key: 'userEditForm.profileEdit', extensionName: 'XmDkfzNetSite')}</h3>

		<fieldset>
			<h5>{f:translate(key: 'userEditForm.profilePicture', extensionName: 'XmDkfzNetSite')}</h5>
			<div class="form-group">
				<div class="form-element">
					<figure class="">
						<f:if condition="{user.logo}">
							<picture>
								<source srcset="{f:uri.image(image:user.logo, width:'150', fileExtension: 'webp')}"
										type="image/webp">
								<source srcset="{f:uri.image(image:user.logo, width:'150', fileExtension: 'jpg')}"
										type="image/jpeg">
								<img src="{f:uri.image(image:user.logo, width:'150', fileExtension: 'jpg')}"
									 alt="{file.originalResource.alternative}"
									 class="picture__image image--responsive"
									 loading="lazy"/>
							</picture>
						</f:if>
						<f:if condition="!{user.logo}">
							<img width="150"
								 src="{f:uri.resource(path: 'EXT:xm_dkfz_net_site/Resources/Public/Images/frontend_user_default.svg')}"
								 alt="{f:translate(key: 'noProfilePicture', extensionName: 'XmDkfzNetSite')}"/>
						</f:if>
					</figure>
				</div>
				<div>
					<f:form.upload additionalAttributes="{accept: 'image/*'}" property="logo" id="logo"/>
					<f:if condition="{user.logo}">
						<label>Delete Logo
							<f:form.checkbox value="1" name="deleteLogo"/>
						</label>
					</f:if>
				</div>
			</div>
		</fieldset>

		<fieldset>
			<label class="h5" for="feature-skill">{f:translate(key: 'userEditForm.feature-0-headline', extensionName: 'XmDkfzNetSite')}</label>
			<div class="form-group">
				<div class="form-element"
					 data-record-type="0"
					 data-all-features="{groupedJsonFeatures.0}"
					 data-selected-features="{user.featuresAsJsonGroupedByRecordType.0}">
					<input type="text" placeholder="{f:translate(key: 'userEditForm.feature-0-placeholder', extensionName: 'XmDkfzNetSite')}" id="feature-skill"/>

					<ul class="list list--inline">
						<f:for each="{user.featuresGroupedByRecordType.0}" as="feature">
							<a href="#" class="button button--secondary" data-feature="{feature.uid}">
								<span>{feature.name}</span>
								<f:render partial="Icon" arguments="{icon: 'close', size: 'xs'}"/>
							</a>
						</f:for>
					</ul>

					<h6>{f:translate(key: 'userEditForm.yourSelection', extensionName: 'XmDkfzNetSite')}</h6>
				</div>
			</div>
		</fieldset>

		<fieldset>
			<label class="h5" for="feature-interest">{f:translate(key: 'userEditForm.feature-1-headline', extensionName: 'XmDkfzNetSite')}</label>
			<div class="form-group">
				<div class="form-element"
					 data-record-type="1"
					 data-all-features="{groupedJsonFeatures.1}"
					 data-selected-features="{user.featuresAsJsonGroupedByRecordType.1}">
					<input type="text" placeholder="{f:translate(key: 'userEditForm.feature-1-placeholder', extensionName: 'XmDkfzNetSite')}" id="feature-interest"/>

					<ul class="list list--inline">
						<f:for each="{user.featuresGroupedByRecordType.1}" as="feature">
							<a href="#" class="button button--secondary" data-feature="{feature.uid}">
								<span>{feature.name}</span>
								<f:render partial="Icon" arguments="{icon: 'close', size: 'xs'}"/>
							</a>
						</f:for>
					</ul>

					<h6>{f:translate(key: 'userEditForm.yourSelection', extensionName: 'XmDkfzNetSite')}</h6>
				</div>
			</div>
		</fieldset>

		<fieldset>
			<label class="h5" for="feature-hobbys">{f:translate(key: 'userEditForm.feature-2-headline', extensionName: 'XmDkfzNetSite')}</label>
			<div class="form-group">
				<div class="form-element"
					 data-record-type="2"
					 data-all-features="{groupedJsonFeatures.2}"
					 data-selected-features="{user.featuresAsJsonGroupedByRecordType.1}">
					<input type="text" placeholder="{f:translate(key: 'userEditForm.feature-2-placeholder', extensionName: 'XmDkfzNetSite')}" id="feature-hobbys"/>

					<ul class="list list--inline">
						<f:for each="{user.featuresGroupedByRecordType.2}" as="feature">
							<a href="#" class="button button--secondary" data-feature="{feature.uid}">
								<span>{feature.name}</span>
								<f:render partial="Icon" arguments="{icon: 'close', size: 'xs'}"/>
							</a>
						</f:for>
					</ul>

					<h6>{f:translate(key: 'userEditForm.yourSelection', extensionName: 'XmDkfzNetSite')}</h6>
				</div>
			</div>
		</fieldset>

		<fieldset>
			<div class="button-group">
				<button data-abort href="#" class="button button--primary fx--hover">
					{f:translate(key: 'abort', extensionName: 'XmDkfzNetSite')}
				</button>
				<button type="submit" class="button button--primary">
					{f:translate(key: 'save', extensionName: 'XmDkfzNetSite')}
				</button>
			</div>
		</fieldset>

		<f:comment>
			<div class="form__item">
				<label> Firmenname
					<f:form.textfield property="company"/>
				</label>
			</div>
			<div class="form__item">
				<label> Anschrift
					<f:form.textfield property="address"/>
				</label>
			</div>
			<div class="form__item form__item--2">
				<label> PLZ
					<f:form.textfield property="zip"/>
				</label> <label> Stadt
				<f:form.textfield property="city"/>
			</label>
			</div>
			<div class="form__item">
				<label> Telefon
					<f:form.textfield property="telephone"/>
				</label>
			</div>
			<div class="form__item">
				<label> Email
					<f:form.textfield property="email"/>
				</label>
			</div>
			<div class="form__item">
				<label id="publicProfile"> Ã–ffentliches Profil
					<f:form.checkbox property="publicProfile" id="publicProfile" value="1"/>
				</label>
			</div>
			<div class="form__item form__item--submit">
				<button type="submit" class="button hollow">
					<span class="icon-save"></span>
					Speichern
				</button>
			</div>
		</f:comment>
	</f:form>
</f:spaceless>
