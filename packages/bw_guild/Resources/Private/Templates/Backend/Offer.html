{namespace be=TYPO3\CMS\Backend\ViewHelpers}{namespace core=TYPO3\CMS\Core\ViewHelpers}
<f:layout name="Administration/Default"/>

<f:section name="main">
	<h1>{f:translate(key:'LLL:EXT:bw_guild/Resources/Private/Language/locallang_tca.xlf:user.offers')}</h1>

	<f:if condition="{offers->f:count()}==0">
		<f:be.infobox title="{f:translate(key:'LLL:EXT:bw_guild/Resources/Private/Language/locallang_be.xlf:module.administration.index.noOfferBox.title')}"
					  message="{f:translate(key:'LLL:EXT:bw_guild/Resources/Private/Language/locallang_be.xlf:module.administration.index.noOfferBox.message')}"
					  state="-1"/>
	</f:if>

	<div class="card-container">
		<a href="#tab"
		   class="card card-size-fixed-small t3js-tabmenu-item active">
			<div class="card-header">
				<div class="card-icon">
					<f:image src="EXT:bw_guild/Resources/Public/Images/tx_bwguild_domain_model_offer.svg" />
				</div>
				<div class="card-header-body">
					<h1 class="card-title">
						<f:translate key="LLL:EXT:bw_guild/Resources/Private/Language/locallang_be.xlf:module.administration.offer.all"/>
					</h1>
					<span class="card-subtitle">{offers->f:count()}
						<f:translate key="LLL:EXT:bw_guild/Resources/Private/Language/locallang_be.xlf:userlist.entries"/>
					</span>
				</div>
			</div>
		</a>
		<f:for each="{offerGroups}" as="offerGroup" iteration="i">
			<a href="#tab-{i.index}"
			   class="card card-size-fixed-small t3js-tabmenu-item"
			   data-toggle="tab">
				<div class="card-header">
					<div class="card-icon">
						<f:image src="EXT:bw_guild/Resources/Public/Images/tx_bwguild_domain_model_offer.{offerGroup.0.recordType}.svg"
								 width="40"
								 height="40"/>
					</div>
					<div class="card-header-body">
						<h1 class="card-title">
							<f:translate key="LLL:EXT:bw_guild/Resources/Private/Language/locallang_tca.xlf:tx_bwguild_domain_model_offer.record_type.{offerGroup.0.recordType}"/>
						</h1>
						<span class="card-subtitle">{offerGroup->f:count()}
							<f:translate key="LLL:EXT:bw_guild/Resources/Private/Language/locallang_be.xlf:userlist.entries"/>
						</span>
					</div>
				</div>
			</a>
		</f:for>
	</div>

	<div role="tabpanel">
		<div class="tab-content">
			<f:for each="{offerGroups}" as="offerGroup" iteration="i">
				<div role="tabpanel" class="tab-pane {f:if(condition: i.isFirst, then: 'active')}" id="tab-{i.index}">
					<f:render partial="Backend/OfferTable" arguments="{_all}" />
				</div>
			</f:for>
		</div>
	</div>

	<style type="text/css">
		.panel-body {
			padding: 1px;
		}

		.panel.panel-space.panel-default.recordlist {
			margin: 0;
			box-shadow: none;
		}

		.card.active {
			background-color: #efefef;
		}

		.card:active, .card:focus {
			text-decoration: none;
		}
	</style>

</f:section>
